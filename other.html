<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>SecretLang Translator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: system-ui, Arial; max-width:720px; margin:20px auto; padding:0 12px; }
    input { padding:8px; width:60%; margin-right:6px; }
    button { padding:8px 10px; }
    .small { font-size:0.9rem; color:#444; margin-top:8px; }
    #result { margin-top:12px; white-space:pre-wrap; }
    #addForm { margin-top:12px; }
  </style>
</head>
<body>
  <h2>SecretLang Translator</h2>
  <p class="small">Type an English or Secret word and press Translate. Add new words with "Add word".</p>

  <input id="inputWord" placeholder="Type English or Secret word">
  <button id="translateBtn">Translate</button>
  <button id="showAdd">Add word</button>

  <div id="result"></div>

  <div id="addForm" style="display:none">
    <h4>Add a new word</h4>
    <input id="eng" placeholder="English word">
    <input id="sec" placeholder="Secret word">
    <button id="saveBtn">Save</button>
  </div>

<script>
(function(){
  // load dictionary from localStorage or default
  const saved = localStorage.getItem('secretDict_v1');
  const defaultDict = {
    // Pronouns
    "she":"Sela",
    "her":"Selam",
    "he":"Viro",
    "him":"Virem",
    "i":"Ti",
    "it":"Ota",
    "its":"Oti",

    // Greetings / Farewells / Polite Words
    "hello":"Sallo",
    "hi":"Ollo",
    "hey":"Ollo",
    "bye":"Navin",
    "no":"Nahr",
    "yes":"Lai",
    "please":"Taru",
    "thank you":"Taren",
    "okay":"Vera",
    "i’m":"I’m",
    "yay":"yab",

    // Articles / Function Words
    "the":"Es",
    "a":"Un",
    "an":"Un",
    "but":"Tav",
    "are":"ar",
    "because":"bcu",
    "and":"Jün",
    "also":"Jün",

    // Time
    "day":"Daren",
    "night":"Naren",

    // Emotions / Mood
    "oh no":"Shavi",
    "teehee":"Snivvi",
    "sad":"Zavi",
    "happy":"Zava",
    "awkwardness":"Clob/beep",
    "excitement":"Vetra",
    "happy":"Lunira",
    "sadness":"Moren",
    "fear":"sir",
    "anxiousness":"sir",

    // Food / Drink
    "food":"Kora",
    "water":"Korin",
    "drink":"Korin",
    "cheese":"Kaw",
    "bread":"Bonn",
    "chips":"Pota",
    "fries":"Pota",
    "crisps":"Cribs",
    "gum":"Chöw",
    "sparkling water":"Spriwasser",
    "coca cola":"Sprikok",
    "dr pepper":"Spripepper DR",
    "sprite":"Sprise",
    "yummy":"Yus",
    "spicy":"piko",
    "sour":"Sór",
    "thirsty":"Selin",

    // Actions / Verbs / Desires
    "do":"Dro",
    "don’t":"Dron",
    "want":"Frenk",
    "can":"Kap",
    "should":"ferd",
    "go":"og",
    "talking":"Nibble Nabbling",
    "jere":"need",
    "have":"have",
    "hate":"haet",
    "like":"loik",

    // People / Names
    "friend":"Mira",
    "tilly luck":"Nilly Nuck",
    "trin":"Posey",
    "isabella":"cheryl",
    "tyler smith":"Nyler Nith",

    // States / Conditions
    "hungry":"Mavro",

    // Objects / Commands
    "stop":"Pöts"
  };
  let dict = saved ? JSON.parse(saved) : defaultDict;

  function save() { localStorage.setItem('secretDict_v1', JSON.stringify(dict)); buildReverse(); }

  // build reverse map
  let rev = {};
  function buildReverse(){
    rev = {};
    for (const k of Object.keys(dict)) rev[dict[k].toLowerCase()] = k;
  }
  buildReverse();

  function translateWord(w){
    const s = (w||"").trim().toLowerCase();
    if(!s) return "Type a word to translate.";
    if (dict[s]) return s + " → " + dict[s];
    if (rev[s]) return s + " → " + rev[s];
    // substring suggestions
    const engMatches = Object.keys(dict).filter(k=>k.includes(s));
    const secMatches = Object.keys(rev).filter(k=>k.includes(s));
    let out = "";
    if (engMatches.length) out += "English matches:\n" + engMatches.map(k=>k + " → " + dict[k]).join("\n");
    if (secMatches.length) out += (out ? "\n\n" : "") + "Secret matches:\n" + secMatches.map(k=>k + " → " + rev[k]).join("\n");
    if (!out) out = "No match found. You can add the word with 'Add word'.";
    return out;
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    const input = document.getElementById('inputWord');
    const result = document.getElementById('result');
    document.getElementById('translateBtn').addEventListener('click', ()=>{
      result.textContent = translateWord(input.value);
    });
    document.getElementById('showAdd').addEventListener('click', ()=>{
      document.getElementById('addForm').style.display = (document.getElementById('addForm').style.display === 'none') ? 'block' : 'none';
    });
    document.getElementById('saveBtn').addEventListener('click', ()=>{
      const e = document.getElementById('eng').value.trim().toLowerCase();
      const s = document.getElementById('sec').value.trim();
      if(!e || !s){ alert('Fill both English and Secret'); return; }
      dict[e] = s;
      save();
      document.getElementById('eng').value = '';
      document.getElementById('sec').value = '';
      document.getElementById('addForm').style.display = 'none';
      result.textContent = 'Saved: ' + e + ' → ' + s;
    });

    // allow Enter key in input to translate
    input.addEventListener('keydown', (ev) => { if(ev.key === 'Enter') document.getElementById('translateBtn').click(); });
  });
})();
</script>
</body>
</html>
